#LAMMPS Input file
# mpirun -np 4 ${LAMMPS_ROOT}/build/lmp_mpi -in in.lammps

# variables
variable       lammps_ani_root getenv LAMMPS_ANI_ROOT
variable       newton_pair     index  off
variable       num_models      index  1
variable       data_file       index  water-0.8nm.data
variable       model_file      index  ${lammps_ani_root}/tests/ani2x_cuaev_single_full.pt
variable       dump_file       index  dump.yaml
variable       device          index  cuda
variable       change_box      index  'all boundary p p p'
variable       steps           index  4

# Intialization
units          real
atom_style     atomic

neighbor       2.0 bin
# always rebuild neighbor list every 2 steps
neigh_modify   every 2 delay 0 check no
newton         ${newton_pair} off

# Atom Definition
read_data      ${data_file}
change_box     ${change_box}

pair_style     ani 5.1 ${model_file} ${device} ${num_models}
pair_coeff     * *

# timestep (0.1 fs)
# velocity       all create 0.0 123456
fix            1 all nve
timestep       0.1

# Output: dump atom positions every 0.5 ps and log info every 0.5 ps
# dump           dumpXYZ all xyz 50 water.xyz
dump           myDump all yaml 1 dump.yaml id type x y z fx fy fz  # c_atomicenergies
dump_modify    myDump time yes units yes thermo yes format float "% 10.10e"
thermo_style   custom step pe ke etotal temp press vol
thermo         1

# Run the simulation: first run (5 ps)
run            ${steps}

# write final state of simulation
# write_data    water.final
